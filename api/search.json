[{"id":"49674afba8c6e39bd46275a6d44f9a9b","title":"在odoo ir.rule的domain中添加字段","content":"应用场景在odoo的xml中用许多地方会用到domain，但是会存在无法满足自己需求的字段，比如说在编写规则时需要员工信息(employee)或者在xml定义action时需要用到员工信息\n&lt;field name=\"domain_force\">[('employee_id', '=', employee.id)]&lt;/field>\n\n&lt;field name=\"domain\">[('employee_id', '=', employee.id)]&lt;/field>\n\n解决可以继承ir.rule模型，在它的_eval_context()方法中添加\nclass IrRuleInherit(models.Model):\n    _inherit = 'ir.rule'\n\n    @api.model\n    def _eval_context(self):\n        res = super(IrRuleInherit, self)._eval_context()\n        res['employee'] = self.env['hr.employee'].sudo().search([('user_id', '=', self.env.user.id),\n                                                                 ('company_id', '=', self.env.company.id)])\n        return res\n这样就可以使用在视图中使用employee的信息了\n","slug":"odoo-note1","date":"2021-09-26T10:13:08.000Z","categories_index":"","tags_index":"odoo,domain","author_index":"Kone Qin"},{"id":"acc23e6efab4e2cee0d3170938ecffa1","title":"about me","content":"","slug":"about-me","date":"2021-09-26T02:51:42.000Z","categories_index":"Diary","tags_index":"me,too","author_index":"Kone Qin"},{"id":"b9663f58f18133b35bfe243f3e916a80","title":"Hello World","content":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.\nQuick StartCreate a new post$ hexo new \"My New Post\"\n\nMore info: Writing\nRun server$ hexo server\n\nMore info: Server\nGenerate static files$ hexo generate\n\nMore info: Generating\nDeploy to remote sites$ hexo deploy\n\nMore info: Deployment\n\n\n\n\n\n\n提示\n文本内容\n\n","slug":"hello-world","date":"2021-09-26T02:34:31.290Z","categories_index":"","tags_index":"","author_index":"Kone Qin"}]